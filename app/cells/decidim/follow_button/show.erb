<% if current_user.present? %>
  <% if current_organization.can_user_follow? || ![Decidim::User].member?(model.class) %>
    <%= link_to(
          path,
          class: button_classes,
          title: text,
          method:,
          remote:,
          id: dom_id(model, id_option)
        ) do %>
      <%= render :content %>
    <% end %>
  <% end %>
<% else %>
  <% if current_organization.can_user_follow? || ![Decidim::User].member?(model.class) %>
    <%= action_authorized_button_to(
          :follow,
          path,
          resource: model,
          class: button_classes,
          title: t("decidim.shared.follow_button.log_in_before_follow"),
          params: req_params,
          'aria-haspopup': true,
          id: dom_id(model, id_option)
        ) do %>
      <%= render :content %>
    <% end %>
  <% end %>
<% end %>
